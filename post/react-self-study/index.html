<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>React Self Study - Charles Geng's Web</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title="Charles Geng's Web" rel=home><div class="logo__item logo__text"><div class=logo__title>Charles Geng's Web</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/post/><i class="fa fa-road"></i>
<span class=menu__text>blog</span></a></li><li class=menu__item><a class=menu__link href=/about/about/><span class=menu__text>About Me</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>React Self Study</h1></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#book-pro-react-16>Book <strong>Pro React 16</strong></a></li><li><a href=#chapter-09>Chapter 09</a></li><li><a href=#chapter-10>Chapter 10</a></li><li><a href=#chapter-11-stateful-component>Chapter 11 Stateful Component</a></li><li><a href=#chapter-12-working-with-events>Chapter 12 Working With Events</a></li></ul></nav></div></div><div class="content post__content clearfix"><h2 id=book-pro-react-16>Book <strong>Pro React 16</strong></h2><ul><li>ISBN: 978-1-4842-4450-0</li><li><a href=https://www.apress.com/gp/book/9781484244500>homepage</a></li></ul><h2 id=chapter-09>Chapter 09</h2><ul><li>to be updated</li></ul><h2 id=chapter-10>Chapter 10</h2><ul><li>to be updated</li></ul><h2 id=chapter-11-stateful-component>Chapter 11 Stateful Component</h2><ul><li><strong>Stateful Component Definition</strong></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>Component</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>statefulComponent</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Component</span> {
  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>props</span>) {
    <span style=color:#66d9ef>super</span>(<span style=color:#a6e22e>props</span>)

    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
      <span style=color:#a6e22e>myState</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>
    };
  }

  <span style=color:#a6e22e>handleClick</span> <span style=color:#f92672>=</span> () =&gt; {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>({ <span style=color:#a6e22e>myState</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span> });
  }

  <span style=color:#a6e22e>render</span>() {
    <span style=color:#66d9ef>return</span> (
      &lt;<span style=color:#f92672>div</span>&gt;
        &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleClick</span>}&gt;<span style=color:#a6e22e>Click</span> <span style=color:#a6e22e>Me</span><span style=color:#f92672>!</span>&lt;/<span style=color:#f92672>button</span>&gt;
      &lt;/<span style=color:#f92672>div</span>&gt;
    )
  }
}

</code></pre></div><ul><li>⚠️<strong>Avoiding the Dependent Value Pitfall</strong></li></ul><blockquote><p><strong>How to avoid</strong>: When you have a series of dependent changes to make, you can pass a function to the setState method that will be invoked when the state data has been updated and that can be used to perform tasks that rely on the changed state values(Page. 299)</p></blockquote><ul><li>⚠️<strong>Avoiding the Missing Updates Pitfall</strong></li></ul><blockquote><p>If you need to perform multiple updates and have each take effect in sequence, then you can use the version of the setState method that accepts a function as its first argument.(Page. 302)</p></blockquote><ul><li><strong>Defining Prop Types and Default Values</strong><ul><li>componentName.propTypes & componentName.defaultProps</li><li>static propTypes & static defaultProps</li></ul></li></ul><h2 id=chapter-12-working-with-events>Chapter 12 Working With Events</h2><ul><li><strong>Events</strong></li></ul><blockquote><p>Events are handled using properties that share the name of the corresponding DOM API property, expressed in camel case. The DOM API onclick property is expressed as onClick in React applications and specifies how to handle the click event, which is triggered when the user clicks an element.</p></blockquote><ul><li><strong>AVOIDING THE EVENT FUNCTION INVOCATION PITFALLS</strong></li></ul><ol><li>⚠️ The first <strong>mistake</strong> is to enclose the function you require in quotes rather than braces. This provides react with a string value instead of a function and produces an error in the browser’s Javascript console.</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx>&lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-primary&#34;</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;this.handleEvent&#34;</span> &gt;
</code></pre></div><ol start=2><li>⚠️ The other common mistake is to use an expression that invokes the function you require. This expression results in react invoking the handleEvent method when the component object is created and not when an event is triggered. You won’t receive an error or warning for this mistake, which makes the problem harder to spot.</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx>&lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;btn btn-primary&#34;</span> <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{ <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleEvent</span>() } &gt;
</code></pre></div><ul><li><strong>Access Component Features</strong></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#75715e>/*******************
</span><span style=color:#75715e>    1st Methord
</span><span style=color:#75715e>********************/</span>
<span style=color:#a6e22e>handleEvent</span> <span style=color:#f92672>=</span> () =&gt; {
  <span style=color:#75715e>//do something
</span><span style=color:#75715e></span>}
...
<span style=color:#a6e22e>onClick</span> <span style=color:#f92672>=</span> {<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleEvent</span>}

<span style=color:#75715e>/*******************
</span><span style=color:#75715e>    2nd Methord
</span><span style=color:#75715e>********************/</span>
<span style=color:#a6e22e>handleEvent</span>  ()  {
  <span style=color:#75715e>//do something
</span><span style=color:#75715e></span>}
...
<span style=color:#a6e22e>onClick</span> <span style=color:#f92672>=</span> {() =&gt; <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleEvent</span>()}

<span style=color:#75715e>/*******************
</span><span style=color:#75715e>    3rd Methord
</span><span style=color:#75715e>********************/</span>
<span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>props</span>){
  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleEvent</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleEvent</span>.<span style=color:#a6e22e>bind</span>(<span style=color:#66d9ef>this</span>)
}
...
<span style=color:#a6e22e>onClick</span> <span style=color:#f92672>=</span> {<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleEvent</span>}
</code></pre></div><ul><li><strong>Avoiding the Event Reuse Pitfall</strong></li></ul><blockquote><p>React reuses SyntheticEvent objects and resets all the properties to null once an event has been handled. The <strong>persist</strong> method is used to prevent React from resetting the event object,</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#a6e22e>foo</span> <span style=color:#f92672>=</span> () =&gt; {
  <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>persist</span>()
  <span style=color:#75715e>// do something
</span><span style=color:#75715e></span>}
</code></pre></div><ul><li><strong>Invoking Event Handlers with a Custom Argument</strong></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx>  <span style=color:#a6e22e>handleEvent</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>event</span>, <span style=color:#a6e22e>newTheme</span>) =&gt; {
    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>setState</span>({ <span style=color:#a6e22e>theme</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>newTheme</span> });
  }

  &lt;<span style=color:#f92672>button</span>
    <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span>{<span style=color:#e6db74>`btn btn-</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>state</span>.<span style=color:#a6e22e>theme</span><span style=color:#e6db74>}</span><span style=color:#e6db74> m-2`</span>}
    {<span style=color:#960050;background-color:#1e0010>/*</span> <span style=color:#a6e22e>Custom</span> <span style=color:#a6e22e>parameter</span><span style=color:#960050;background-color:#1e0010>*/</span>}
    <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) =&gt; <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>handleClick</span>(<span style=color:#a6e22e>e</span>, <span style=color:#e6db74>&#34;danger&#34;</span>)}&gt;
    <span style=color:#a6e22e>Danger</span>
  &lt;/<span style=color:#f92672>button</span>&gt;

</code></pre></div><ul><li><strong>Preventing Default Behavior</strong></li></ul><blockquote><p>Some events have behavior that the browser performs by default. The <strong>preventDefault</strong> method can be called on event objects to prevent the default behavior.</p></blockquote><ul><li><strong>Target Phase and Bubble Phase</strong></li></ul><blockquote><p>When an event is first triggered, it enters the target phase, where event handlers applied to the element that is the source of the event are invoked. Once those event handlers are complete, the event enters the bubble phase, where the event works its way up the chain of ancestor elements and is used to invoke any handlers that have been applied for that type of event.</p></blockquote><p><img src=/img/TargetPhaseAndBubblePhase.png alt="The target and bubble phases of the event"></p><ul><li><strong>Capture Phase</strong></li></ul><blockquote><p>The capture phase provides an opportunity for elements to process events before the target phase. During the capture phase, the browser starts with the body element and works its way down the hierarchy of elements toward the target, following the opposite path to the bubble phase, and gives each element the chance to process the event.</p></blockquote><p><img src=/img/CapturePhase.png alt="Capture Phase"></p><ul><li><strong>Stopping Event Propagation</strong></li></ul><blockquote><p>Understanding event phases can also be important if you want to disrupt the normal propagation sequence and prevent elements from receiving events.</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>stopPropagation</span>();
</code></pre></div></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/react/ rel=tag>REACT</a></li><li class=tags__item><a class="tags__link btn" href=/tags/front-end/ rel=tag>FRONT-END</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><div class=authorbox__header><span class=authorbox__name>About Charles Geng</span></div><div class=authorbox__description>This is not a technology blog only. 这不仅仅是一个技术博客。</div></div><section class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//charlesgeng-github-io.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Charles Geng's Web.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>